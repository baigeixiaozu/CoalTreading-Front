{"version":3,"sources":["webpack:///./src/views/user/login.vue","webpack:///./src/views/user/login.vue?5041","webpack:///./src/views/user/api.js"],"names":["label-position","labelPosition","model","loginForm","status-icon","rules","ref","label-width","label","prop","login","placeholder","type","pass","autocomplete","submitForm","regForm","data","required","message","trigger","methods","formName","this","$refs","validate","valid","$message","postData","localStorage","removeItem","$router","push","name","then","res","resp","code","$store","commit","access_token","role","duration","complete","path","$route","query","redirect","console","log","catch","err","render","getRoleList","request","get","userLogin","post","userRegister","userComplete","getUserInfo","getFullUserInfo","genNewUser","getDetail","id","getRegList","page","limit","params","current","size","downloadPicFile","file","getPass","getNotPass","subAuditOpinion","opinion"],"mappings":"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","file":"js/chunk-69f17bb6.b846a617.js","sourcesContent":["<template>\n  <el-form\n    :label-position=\"labelPosition\"\n    :model=\"loginForm\"\n    status-icon\n    :rules=\"rules\"\n    ref=\"loginForm\"\n    label-width=\"100px\"\n  >\n    <el-form-item label=\"用户名\" prop=\"login\">\n      <el-input\n        v-model.number=\"loginForm.login\"\n        placeholder=\"请输入用户名\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item label=\"密码\" prop=\"pass\">\n      <el-input\n        type=\"password\"\n        v-model=\"loginForm.pass\"\n        autocomplete=\"off\"\n        placeholder=\"请输入密码\"\n      ></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitForm('loginForm')\"\n        >登录</el-button\n      >\n      <el-button @click=\"regForm('loginForm')\">注册</el-button>\n    </el-form-item>\n  </el-form>\n</template>\n\n<script>\nimport {userLogin} from './api';\nexport default {\n  data() {\n    return {\n      labelPosition: \"right\",\n      loginForm: {\n        pass: \"\",\n        login: \"\",\n      },\n      rules: {\n        login: [\n          {\n            required: true,\n            message: \"用户名不能为空\",\n            trigger: \"blur\",\n          },\n        ],\n\n        pass: [\n          {\n            required: true,\n            message: \"密码不能为空\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (!valid) {\n          this.$message({\n            message: \"输入不正确, 请填写用户名密码\",\n            type: \"warning\",\n          });\n          return false;\n\n          //this.$router.push({name:'reg'});\n        } else {\n          this.postData();\n        }\n      });\n    },\n\n    regForm(formName) {\n      localStorage.removeItem(\"token\");\n      this.$router.push({\n        name: \"userReg\",\n      });\n    },\n\n    postData: function () {\n      \n      userLogin(this.loginForm.login, this.loginForm.pass)\n        .then( (res)=> {\n          const resp = res;\n          if (resp.code == 200) {\n            this.$store.commit(\"set_token\", resp.data.access_token);\n            this.$store.commit(\"set_role\", resp.data.role[0]);\n            this.$store.commit(\"set_isLogin\", true);\n            \n            // console.log(\"login test\", localStorage.token);\n            this.$message({\n              message: \"登录成功\",\n              type: \"success\",\n              duration: 1000\n            });\n            if(resp.data.complete === false){\n              this.$router.push({\n                path: \"/user/complete\"\n              });\n            }else if(this.$route.query.redirect){\n              this.$router.push(this.$route.query.redirect);\n            }else{\n              console.log(\"跳转至个人信息页\")\n              this.$router.push({\n                path: \"/user/info\"\n              });\n            }\n          } else {\n          }\n        })\n        .catch(function (err) {\n          console.log(err);\n        });\n    },\n  },\n};\n</script>\n\n<style>\n</style>\n","import { render } from \"./login.vue?vue&type=template&id=3ed1d02e\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","// 刚刚封装的axios\nimport request from '../../utils/axios';\n\n/***\n *    __/\\\\\\________/\\\\\\_____/\\\\\\\\\\\\\\\\\\\\\\____/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\____/\\\\\\\\\\\\\\\\\\_____        \n *     _\\/\\\\\\_______\\/\\\\\\___/\\\\\\/////////\\\\\\_\\/\\\\\\///////////___/\\\\\\///////\\\\\\___       \n *      _\\/\\\\\\_______\\/\\\\\\__\\//\\\\\\______\\///__\\/\\\\\\_____________\\/\\\\\\_____\\/\\\\\\___      \n *       _\\/\\\\\\_______\\/\\\\\\___\\////\\\\\\_________\\/\\\\\\\\\\\\\\\\\\\\\\_____\\/\\\\\\\\\\\\\\\\\\\\\\/____     \n *        _\\/\\\\\\_______\\/\\\\\\______\\////\\\\\\______\\/\\\\\\///////______\\/\\\\\\//////\\\\\\____    \n *         _\\/\\\\\\_______\\/\\\\\\_________\\////\\\\\\___\\/\\\\\\_____________\\/\\\\\\____\\//\\\\\\___   \n *          _\\//\\\\\\______/\\\\\\___/\\\\\\______\\//\\\\\\__\\/\\\\\\_____________\\/\\\\\\_____\\//\\\\\\__  \n *           __\\///\\\\\\\\\\\\\\\\\\/___\\///\\\\\\\\\\\\\\\\\\\\\\/___\\/\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\_\\/\\\\\\______\\//\\\\\\_ \n *            ____\\/////////_______\\///////////_____\\///////////////__\\///________\\///__\n * \n * 链接：http://patorjk.com/software/taag/#p=testall&c=c&f=Efti%20Wall&t=USER\n * */\nexport const getRoleList = (type)=>{\n    return request.get(\"/user/getRoleList/\" + type)\n}\n\nexport const userLogin = (login, pass)=>{\n    return request.post(\"/user/login\", {\n        login,pass\n    })\n}\n\nexport const userRegister = (data)=>{\n    return request.post(\"/user/register\", data)\n}\n\nexport const userComplete = (data)=>{\n    return request.post(\"/user/complete\", data)\n}\n\nexport const getUserInfo = ()=>{\n    return request.get(\"/user/info\")\n}\n\nexport const getFullUserInfo = ()=>{\n    return request.get(\"/user/fullInfo\")\n}\n\nexport const genNewUser = (data)=>{\n    return request.post(\"/user/new\", data)\n}\nexport const getDetail = (id)=>{\n    return request.get(\"/info/\" + id )\n}\nexport const getRegList = (page,limit)=>{\n    console.log(page, limit);\n    return request.get(\"/info/list\", {\n        params:{\n            current: page,\n            size: limit\n        }\n    })\n}\nexport const downloadPicFile = (id,file)=>{\n    return request.get(\"/servlet/pic\",{\n         id:id,\n         file:file\n    })\n}\nexport const getPass = (id)=>{\n    return request.post(\"/info/verify/\"+id )\n}\nexport const getNotPass = (id)=>{\n    return request.post(\"/info/reject/\"+id )\n}\nexport const subAuditOpinion = (id,opinion)=>{\n    return request.get(\"/info/\"+id+'/' + opinion )\n}\n"],"sourceRoot":""}